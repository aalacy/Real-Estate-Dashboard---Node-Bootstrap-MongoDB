<!doctype html>
<html lang="en">
    <head>
        <% include ../partials/head %>

    </head>
    <body>
    <% include ../partials/topnav %>

      <!-- MAIN CONTENT
    ================================================== -->
    <div class="main-content">
    
        <!-- HEADER -->
        <div class="header">
            
            <div class="container">
    
            <!-- Body -->
            <div class="header-body">
                <div class="row align-items-center">
                <div class="col">
            
                    <!-- Title -->
                  <h1 class="header-title">
                    Properties
                  </h1>

                </div>
                
                <!-- Button -->
                <a href="/property/new" class="btn btn-primary d-block d-md-inline-block lift">
                    Add a property
                </a>
                
                </div>
            </div> <!-- / .header-body -->
    
            </div>
        </div>
    
        <!-- CONTENT -->
        
        <div class="container">
  
          <!-- Tab content -->
          <div class="row listAlias">
                <% all_properties.forEach(function(property){%>
                  <div class="col-12 col-md-6 col-xl-4">
  
                    <!-- Card -->
                    <div class="card p-relative">
                      <div class="row align-items-center badge-group">
                        <div class="col">
                          <div class="row align-items-center no-gutters">
                              <div class="col-auto">
                                <% if (property.status) { 
                                  let badge = property.status == 'Vacant' && property.units == 1 ? 'danger' : ''
                                %>
                                  <h2><span class="badge badge-soft-<%= badge %> ml-1 mt-n1 text-capitalize"><%= property.status %></span><h2>
                                <% }%>
                              </div>
  
                          </div> <!-- / .row -->
                        </div>
                      </div> <!-- / .row -->
                        <a href="/property/overview/<%=property.id%>/overview">

                          <img src="<%=property.image ? '/' + property.image : '/img/avatars/projects/project-1.jpg'%>" alt="..." class="card-img-top cover-image">
                        </a>
                        <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col">
                        
                            <!-- Title -->
                            <h3 class="card-title mb-2 name">
                                <a href="/property/overview/<%=property.id%>">
                                  <div class="text-ellipsis">
                                    <%= property.address %>, <%= property.city %>
                                  </div>
                                </a>
                            </h3>
    
                            <!-- Subtitle -->
                            <p class="card-text medium text-muted text-capitalize">
                                <%= property.type %>
                            </p>
    
                            </div>
                            <div class="col-auto">
                            
                            <!-- Dropdown -->
                            <div class="dropdown">
                                <a href="#" class="dropdown-ellipses dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fe fe-more-vertical"></i>
                                </a>
                                <div class="dropdown-menu dropdown-menu-right">
                                  <a href="/property/overview/<%=property.id%>" class="dropdown-item">
                                    Edit
                                  </a>
                                  <a href="#" class="dropdown-item delete-property" data-id="<%= property.id%>">
                                    Remove
                                  </a>
                                </div>
                            </div>
    
                            </div>
                        </div> <!-- / .row -->
  
                      <!-- Divider -->
                      <hr>
  
                      <div class="row align-items-center">
                        <div class="col">
                        <div class="row align-items-center no-gutters">
                            <div class="col-6 text-center border-right">
                              <!-- Title -->
                              <h6 class="card-title text-uppercase text-muted mb-2">
                                  Property Value
                              </h6>
                      
                              <!-- Heading -->
                              <span class="h2 mb-0">
                                  Â£<%=property.current_value.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,')%>
                              </span>
                            
                            </div>
                            <div class="col-6 text-center">
                                <!-- Title -->
                              <h6 class="card-title text-uppercase text-muted mb-2">
                                  Rental Yield
                              </h6>
                      
                              <!-- Heading -->
                              <span class="h2 mb-0">
                                <%=property.rental_yield.toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,')%>%
                              </span>
                            
                            </div>

                        </div> <!-- / .row -->
                        </div>
                    
                    </div> <!-- / .row --> 
  
                      </div> <!-- / .card-body -->
                  </div>
                  
                  </div>
                <% })%>
              </div> <!-- / .row -->
        </div>
      
       <!-- JAVASCRIPT
  ================================================== -->
    <% include ../partials/scripts %>

    </body>
</html>